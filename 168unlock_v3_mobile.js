console.log("[168UNLOCK V3] injected");const level=3;const term=1;var apiurl="http://127.0.0.1:40476";Number.prototype.pad=function(n){return new Array(n).join('0').slice((n||2)*-1)+this};async function auto(){console.log("auto");var notdo=await document.querySelectorAll(".textred").length;if(notdo==0){console.log("Zero")}else{console.log("Start loop");await api();while(1){if($("button[name*='auto']:not([checked])").length==1){break}else{var notdoa=await document.querySelectorAll(".textred").length;if(notdoa==0){await api();break}if(notdoa==notdo){await Reader();notdo--;console.log("Reader")}else{await api();console.log("API")}}}}$("button[name*='auto']").removeAttr("checked","")}async function loadl(subj=$('#LEN').attr("subj")){var rang=$('#rang').val()||$('#ranglevel').val();var schcode=$('#sch_code').val();var stdcode=$('#stu_code').val();try{await $('#maindata').load('learn.php?rang='+rang+'&level='+level+'&term='+term+'&subj='+subj.pad(2).slice(-2)+'&stdcode='+stdcode+'&schcode='+schcode)}catch{await $('#maindata').load('learn.php?rang='+rang+'&level='+level+'&term='+term+'&subj='+subj+'&stdcode='+stdcode+'&schcode='+schcode)}}async function api(){try{var data=document.querySelectorAll('#LEN');var text=data[data.length-1];console.log(data);var getCookie=function(){var cookies=document.cookie.split(';');for(var i=0;i<cookies.length;++i){var pair=cookies[i].trim().split('=');if(pair[0]=="PHPSESSID")return pair[1]}return null};await $.ajax({type:'POST',url:`${apiurl}/?cookie=${getCookie()}&subjint=${text.getAttribute("subj")}&subsubjint=${text.getAttribute("subsubj")}&termint=${text.getAttribute("term")}&levelid=${text.getAttribute("level")}&rangid=${text.getAttribute("rang")}&learntypestr=${text.getAttribute("learntype")}&examtypestr=${text.getAttribute("examtype")}&stu_code=${document.querySelector('.stu_code').getAttribute("value")}&idlearn=${text.getAttribute("idlearn")}`,success:function(data){if(data=="DONE"){}else{return alert("ERROR :"+data);}}});await loadl();}catch{alert("ERROR 404");}}async function Reader(){try{var data=document.querySelectorAll('.learn');var text=data[data.length-1];await $.ajax({type:'GET',});await loadl();}catch{alert("ERROR 404")}}function fasta(){if(window.location.href=="https://www.virtualschool.club/student/exam.php"){var examtype=$("#examtype").val();var rangid=$("#rang").val();var termid=$("#term").val();var levelid=$("#level").val();var subjid=$("#subj").val();var subsubjid=$("#subsubj").val();var stdid=$("#stdcode").val();var schid=$("#schcode").val();var learntypeid=$("#learntype").val();var maxyear=$("#maxyear").val();var idlearn=$("#idlearn").val();var exammax=$("#exammax").val();for(var s=0;s<exammax;s++){var Listans=["ก","ข","ค","ง"];var ansraned=Listans[Math.floor(Math.random()*Listans.length)];var payload=`year=2563&term=${termid}&level=${levelid}&subj=${subjid}&subsubj=${subsubjid}&quesid=${s+1}&schcode=${schid}&user=${stdid}&ans=${ansraned}&datetimein=1970/01/01 00:00:01&datein=1970/01/01&timein=00:00:01`;var result_ran=$.ajax({type:'POST',url:'https://www.virtualschool.club/student/exam_save_'+examtype+'.php',headers:{'Content-Type':'application/x-www-form-urlencoded; charset=utf-8'},data:payload});console.log(result_ran.text);}alert("Done");}else{alert("ERROR 404");}}function hideimg(){console.log("[168UNLOCK V3] Hide img");var pic=$("#pic_profile");if(pic){$("#pic_profile").remove();$("#pic_profile").remove();}}function hidename(){console.log("[168UNLOCK V3] Hide Name");var rename=$("strong");if(rename){$("strong").remove();}}async function teleport(){$(".img_suggestsch").hide();var rang=$('#rang').val()||$('#ranglevel').val();await $('#maindata').load(`subject.php?rang=${rang}&level=${level}&term=${term}`);}function dragElement(elmnt){var pos1=0,pos2=0,pos3=0,pos4=0;if(document.getElementById(elmnt.id+"header")){document.getElementById(elmnt.id+"header").onmousedown=dragMouseDown;}else{elmnt.onmousedown=dragMouseDown;}function dragMouseDown(e){e=e||window.event;e.preventDefault();pos3=e.clientX;pos4=e.clientY;document.onmouseup=closeDragElement;document.onmousemove=elementDrag;}function elementDrag(e){e=e||window.event;e.preventDefault();pos1=pos3-e.clientX;pos2=pos4-e.clientY;pos3=e.clientX;pos4=e.clientY;elmnt.style.top=(elmnt.offsetTop-pos2)+"px";elmnt.style.left=(elmnt.offsetLeft-pos1)+"px";}function closeDragElement(){document.onmouseup=null;document.onmousemove=null;}}function showofflist(){var eleI=$("#menulist").css("height");if(eleI=="235px"){$("#menulist").css("height","0");}else{$("#menulist").css("height","235");}}$('body').keydown(function(e){switch(e.key){case"Insert":showofflist();break;default:return;}});function set(name){if(jsondata[name]==true){jsondata[name]=false;}else{jsondata[name]=true;}sessionStorage.setItem("168unlock",pack(jsondata));}function doa(){if(jsondata.hideimg==true)hideimg();if(jsondata.hidename==true)hidename();dragElement(document.getElementById("menuunlock"));$("button[name*='Reader']").click(function(){Reader();});$("button[name*='fasta']").click(function(){fasta();});$("button[name*='teleport']").click(function(){teleport();});$("button[name*='api']").click(function(){api();});$("button[name*='auto']").click(function(){if($("button[name*='auto']:not([checked])").length==1){$(this).attr("checked","");auto();}else{$(this).removeAttr("checked");}});$("button[name*='hidename']").click(function(){if($("button[name*='hidename']:not([checked])").length==1){$(this).attr("checked","");hidename();}else{$(this).removeAttr("checked");}set("hidename");});$("button[name*='hideimg']").click(function(){if($("button[name*='hideimg']:not([checked])").length==1){$(this).attr("checked","");hideimg();}else{$(this).removeAttr("checked");}set("hideimg");});}const insertscr=(scr)=>{const script=document.createElement('script');script.src=scr;document.head.appendChild(script);return script;};const insertcss=(css)=>{const style=document.createElement('style');style.type='text/css';style.appendChild(document.createTextNode(css));document.head.appendChild(style);return style;};var htmlmenu=`<div id="menuunlock"style="top: 40px; left: 40px;"><header id="headermenu"style="height: 20px;  cursor: move; background-color: #323337;  color: #fff;"><p class="rainbow-text">168UNLOCK v3</p></header><div id="menulist"style="height: 235px;"><button name="auto"class="button">Auto(Pre-Alpha)</button><button name="api"class="button">API</button><button name="Reader"class="button">Reader</button><button name="fasta"class="button">Fast Answer</button><button name="teleport"class="button">Teleport</button><button name="hideimg"class="button">Hide Img</button><button name="hidename"class="button">Hide Name</button></div></div>`,css=`@keyframes test{0%{color:#ff0000}20%{color:#00ff00}40%{color:#ffff00}60%{color:#0000ff}80%{color:#00ffff}100%{color:#ff0000}}.rainbow-text{animation-name:test;animation-duration:4s;animation-iteration-count:infinite;}.button{background-color:white;border:none;color:#6cbcfa;border:2px solid#4CAF50;width:200px;height:50px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:0.4s;cursor:pointer;}.button:hover{background-color:#4CAF50;color:white;}.button[checked]{background-color:#4CAF50;color:white;}.btnicon{float:right;}.arrow{border:solid black;border-width:0 3px 3px 0;display:inline-block;padding:3px;}.up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg);}.down{transform:rotate(45deg);-webkit-transform:rotate(45deg);}#menuunlock{display:block;background:#43464b;z-index:999;position:fixed;width:420px;margin-top:0px;margin-left:0px;}#menulist{overflow:hidden;-webkit-transition:height 1s ease;-moz-transition:height 1s ease;-o-transition:height 1s ease;transition:height 1s ease;height:0;}`;insertcss(css);document.body.innerHTML=htmlmenu+document.body.innerHTML;const pack=(d)=>JSON.stringify(d);const unpack=(d)=>JSON.parse(d);if(sessionStorage.length==0){sessionStorage.setItem("168unlock",pack({"hideimg":false,"hidename":false}));}var jsondata=unpack(sessionStorage.getItem("168unlock")),x;for(x in jsondata){if(jsondata[x])$(`button[name*='${x}']`).attr("checked","")}doa();
